<!DOCTYPE html>
<html>
<head>
  <title>Salary Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #FFFFFF;
      color: #000000;
      font-family: 'Poppins', sans-serif;
      margin: 10px;
      transition: background-color 0.3s, color 0.3s;
    }

    h2 {
      text-align: center;
    }

    .table-container {
      overflow-x: auto;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      min-width: 800px;
      margin-top: 20px;
    }

    th {
      background-color: #4A90E2;
      color: white;
      border: 1px solid #000;
      padding: 6px;
      text-align: center;
    }

    td {
      border: 1px solid #000;
      padding: 6px;
      text-align: center;
    }

    input[type="number"],
    input[type="date"] {
      width: 100%;
      box-sizing: border-box;
      padding: 5px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    input[type="number"]:focus,
    input[type="date"]:focus {
      border-color: #4A90E2;
      outline: none;
      background-color: #f0f8ff;
    }

    .footer-branding {
      margin-top: 20px;
      font-weight: bold;
      text-align: center;
      font-size: 16px;
    }

    .friday-row {
      background-color: #ff9999 !important;
    }

    .dark-mode {
      background-color: #1c1c1c;
      color: #e0e0e0;
    }

    .dark-mode input {
      background-color: #2a2a2a;
      color: #fff;
      border: 1px solid #555;
    }

    .summary-cards {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .summary-card {
      background-color: #fff59d;
      border: 2px solid #fbc02d;
      color: #000;
      font-weight: bold;
      font-size: 18px;
      width: 180px;
      height: 120px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }

    @media screen and (max-width: 600px) {
      table {
        font-size: 12px;
      }

      input[type="number"],
      input[type="date"] {
        font-size: 12px;
        padding: 4px;
      }

      h2 {
        font-size: 18px;
      }

      .footer-branding {
        font-size: 14px;
      }

      .summary-card {
        width: 100%;
        font-size: 16px;
        height: 100px;
      }
    }

    .menu-container {
      position: absolute;
      top: 10px;
      right: 10px;
    }

    .menu-container button {
      font-size: 20px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .menu-options {
      display: none;
      position: absolute;
      right: 0;
      background-color: white;
      border: 1px solid #ccc;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      border-radius: 6px;
      overflow: hidden;
    }

    .menu-options button {
      display: block;
      width: 100%;
      padding: 8px;
      border: none;
      background: none;
      cursor: pointer;
      text-align: left;
    }

    .menu-options button:hover {
      background-color: #f0f0f0;
    }

    .dark-mode .menu-options {
      background-color: #333;
      color: white;
      border-color: #444;
    }

    .dark-mode .menu-options button:hover {
      background-color: #444;
    }
  </style>
</head>
<body>
  <div class="menu-container">
    <button onclick="toggleMenu()">‚ãÆ</button>
    <div id="menuOptions" class="menu-options">
      <button onclick="toggleDarkMode()">üåô ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶°</button>
      <button onclick="resetAllData()">üîÅ Reset All</button>
      <button onclick="window.open('https://www.appcreator24.com/app3577069-gzva0d', '_blank')">‚¨áÔ∏è Download App for Save Information</button>
    </div>
  </div>

  <h2>Salary Calculator</h2>

  <div class="table-container">
    <table id="salaryTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Day</th>
          <th>Carry</th>
          <th>Success</th>
          <th>R.P.</th>
          <th>Amount</th>
          <th>Faild</th>
          <th>%</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <div class="summary-cards">
    <div class="summary-card">
      <div>Success Rate</div>
      <div id="successRate">0%</div>
    </div>
    <div class="summary-card">
      <div>Salary Total</div>
      <div id="salary">0</div>
    </div>
    <div class="summary-card">
      <div>Delivery Total</div>
      <div id="deliveryTotal">0</div>
    </div>
  </div>

  <div class="footer-branding">‡¶¶‡¶æ‡¶∞‡¶æ‡¶ú ‡¶ï‡ßã‡¶Æ‡ßç‡¶™‡¶æ‡¶®‡¶ø ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü‡ßá‡¶°</div>

  <script>
    const rowCount = 31;
    let historyStack = [];
    let redoStack = [];

    function getDayName(d) {
      const t = new Date(d);
      return isNaN(t) ? "" : t.toLocaleDateString("en-US", { weekday: "long" });
    }

    function calculateRow(i) {
      const d = document.getElementById(`date-${i}`).value;
      const c = parseFloat(document.getElementById(`carry-${i}`).value) || 0;
      const s = parseFloat(document.getElementById(`success-${i}`).value) || 0;
      const rp = parseFloat(document.getElementById(`rp-${i}`).value) || 0;
      const day = getDayName(d);
      const f = c - s;
      const p = c > 0 ? Math.round((s / c) * 100) : 0;
      let a = 0;

      if (s <= 19) a = s * 18;
      else if (s <= 28) a = (s - 19) * 25 + 342;
      else if (s <= 35) a = (s - 28) * 30 + 342 + 225;
      else a = (s - 35) * 35 + 342 + 225 + 210;

      document.getElementById(`day-${i}`).innerText = day;
      document.getElementById(`faild-${i}`).innerText = f;
      document.getElementById(`percent-${i}`).innerText = p + "%";
      document.getElementById(`amount-${i}`).innerText = Math.round(a);

      const row = document.getElementById(`row-${i}`);
      row.className = "";

      if (day === "Friday") {
        row.classList.add("friday-row");
      }

      const prevCarry = i > 0 ? document.getElementById(`carry-${i - 1}`).value : "";
      const nextCarry = i < rowCount - 1 ? document.getElementById(`carry-${i + 1}`).value : "";

      if (!document.getElementById(`carry-${i}`).value && prevCarry && nextCarry) {
        row.style.backgroundColor = "#c8f7c5";
      } else {
        if (day !== "Friday") row.style.backgroundColor = "";
      }

      saveData(i, d, c, s, rp);
      calculateTotal();
    }

    function saveData(i, d, c, s, rp) {
      const prev = JSON.parse(localStorage.getItem("salaryData") || "{}");
      historyStack.push(JSON.stringify(prev));
      redoStack = [];

      const data = { ...prev, [i]: { date: d, carry: c, success: s, rp: rp } };
      localStorage.setItem("salaryData", JSON.stringify(data));
    }

    function loadData() {
      const data = JSON.parse(localStorage.getItem("salaryData") || "{}");
      for (let i = 0; i < rowCount; i++) {
        if (data[i]) {
          document.getElementById(`date-${i}`).value = data[i].date;
          document.getElementById(`carry-${i}`).value = data[i].carry;
          document.getElementById(`success-${i}`).value = data[i].success;
          document.getElementById(`rp-${i}`).value = data[i].rp;
          calculateRow(i);
        }
      }
    }

    function calculateTotal() {
      let s = 0, c = 0, a = 0, r = 0;
      for (let i = 0; i < rowCount; i++) {
        s += parseFloat(document.getElementById(`success-${i}`).value) || 0;
        c += parseFloat(document.getElementById(`carry-${i}`).value) || 0;
        a += parseFloat(document.getElementById(`amount-${i}`).innerText) || 0;
        r += parseFloat(document.getElementById(`rp-${i}`).value) || 0;
      }
      const sr = c > 0 ? Math.round((s / c) * 100) : 0;
      const salary = a + r * 15;
      document.getElementById("successRate").innerText = sr + "%";
      document.getElementById("salary").innerText = Math.round(salary);
      document.getElementById("deliveryTotal").innerText = Math.round(s);
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }

    function toggleMenu() {
      const menu = document.getElementById("menuOptions");
      menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    function resetAllData() {
      if (confirm("Are you sure you want to reset all data?")) {
        localStorage.removeItem("salaryData");
        location.reload();
      }
    }

    function handleMultiPaste(e, startIndex) {
      e.preventDefault();
      const pasteData = e.clipboardData.getData('text');
      const values = pasteData.trim().split(/\s+|\n/);
      for (let offset = 0; offset < values.length; offset++) {
        const val = parseInt(values[offset]);
        if (!isNaN(val) && startIndex + offset < rowCount) {
          document.getElementById(`success-${startIndex + offset}`).value = val;
          calculateRow(startIndex + offset);
        }
      }
    }

    window.onload = () => {
      const b = document.getElementById("tableBody");
      for (let i = 0; i < rowCount; i++) {
        let row = document.createElement("tr");
        row.id = `row-${i}`;
        row.innerHTML = `
          <td><input type="date" id="date-${i}" onchange="calculateRow(${i})"/></td>
          <td id="day-${i}"></td>
          <td><input type="number" step="1" id="carry-${i}" oninput="this.value=this.value.replace(/[^0-9]/g,'')" onchange="calculateRow(${i})"/></td>
          <td><input type="number" step="1" id="success-${i}" oninput="this.value=this.value.replace(/[^0-9]/g,'')" onchange="calculateRow(${i})"/></td>
          <td><input type="number" step="1" id="rp-${i}" oninput="this.value=this.value.replace(/[^0-9]/g,'')" onchange="calculateRow(${i})"/></td>
          <td id="amount-${i}">0</td>
          <td id="faild-${i}">0</td>
          <td id="percent-${i}">0%</td>`;
        b.appendChild(row);

        // Add paste event for success input
        document.getElementById(`success-${i}`).addEventListener("paste", (e) => handleMultiPaste(e, i));
      }
      loadData();
    };
  </script>
</body>
</html>
